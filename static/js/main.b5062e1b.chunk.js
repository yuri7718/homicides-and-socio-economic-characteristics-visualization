(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{133:function(t,e,a){t.exports=a.p+"static/media/NAT_counties.c46752c1.csv"},134:function(t,e,a){t.exports=a.p+"static/media/NAT_states.e22e9ae7.csv"},142:function(t,e,a){t.exports=a.p+"static/media/NAT.6db895be.geojson"},143:function(t,e,a){t.exports=a.p+"static/media/US_states.2aa3311d.geojson"},144:function(t,e,a){t.exports=a(613)},151:function(t,e,a){},153:function(t,e,a){},156:function(t,e,a){},418:function(t,e,a){},420:function(t,e,a){},613:function(t,e,a){"use strict";a.r(e);var r=a(0),n=a.n(r),s=a(132),i=a.n(s),o=(a(151),a(23)),c=a(24),l=a(27),u=a(13),p=a(25),h=a(34),f=(a(153),a(621)),d=a(422),m=a(423),y=a(618),v=a(9),g=a(133),E=a.n(g),S=a(134),b=a.n(S),T=a(617),O=a(135),k=(a(156),a(158),function(t){function e(t){return Object(o.a)(this,e),Object(l.a)(this,Object(u.a)(e).call(this,t))}return Object(p.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this,e=this.props.featureList;return n.a.createElement("div",null,n.a.createElement("h3",null,"Features"),n.a.createElement("div",{id:"scrollableDiv",style:{height:400,overflow:"auto",padding:"0 16px",border:"1px solid rgba(140, 140, 140, 0.35)"}},n.a.createElement(O.a,{dataLength:e.length,scrollableTarget:"scrollableDiv"},n.a.createElement(T.b,{dataSource:e,renderItem:function(e){return n.a.createElement(T.b.Item,{key:e.key,accessKey:e.key,onClick:t.props.onSelectFeature,style:{background:t.props.currentFeature===e.key?"#7b88b8":"white"}},n.a.createElement(T.b.Item.Meta,{title:e.feature}),n.a.createElement("div",null,"[Statistical Measures]"))}}))))}}]),e}(n.a.Component)),A=a(619),C=(a(418),function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).marks=a.props.timeline.reduce(function(t,e){return t[e]="19"+e,t},{}),a}return Object(p.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return n.a.createElement("div",{id:"timeline"},n.a.createElement(A.a,{marks:this.marks,step:null,defaultValue:60,min:60,max:90,onChange:this.props.onSelectTime,trackStyle:{backgroundColor:"#f5f5f5"}}))}}]),e}(n.a.Component));function j(t,e){return v.l().domain(v.d(t)).range(v.m[e])}function _(t,e,a){var r=e.map(function(e){return t+e}),n=[];return r.forEach(function(t){var e=a.map(function(e){return e.properties[t]});n=v.d(n.concat(e))}),n}function w(t){v.o(t).style("visibility","hidden")}function M(t){t.style("visibility","hidden")}var R=a(623),D=a(620),x=a(112);a(420);var L=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).toggleMapType=function(t){a.setState({map:t})},a.increaseZoomScale=function(){a.zoomTransition(v.n("#map"),1.2)},a.decreaseZoomScale=function(){a.zoomTransition(v.n("#map"),.8)},a.resetSelectedRegion=function(){a.setState({region:""},function(){a.props.onSelectRegion("","")})},a.state={property:a.props.currentFeature+a.props.currentYear,showState:!0,x:0,y:0,zoomScale:1,map:"CHOROPLETH",region:""},a.stateGeojson=[],a.countyGeojson=[],a.canvasRef=n.a.createRef(),a.ZOOM_SCALE_THRESHOLD=2,a.STATE_MAP_ID="g-state",a.COUNTY_MAP_ID="g-county",a.STATE_COLORS=7,a.COUNTY_COLORS=7,a.zoom=Object,a.featureList={},a.tooltip=v.n("body").append("div").attr("class","tooltip").style("visibility","hidden").style("left","0px").style("top","0px"),a}return Object(p.a)(e,t),Object(c.a)(e,[{key:"zoomTransition",value:function(t,e){t.transition().delay(100).duration(700).call(this.zoom.scaleBy,e)}},{key:"drawMap",value:function(){var t=this,e=this.canvasRef.current,a=e.scrollWidth,r=e.scrollHeight,n=v.e().scale(a/1.2).translate([a/2,r/2]),s=v.f().projection(n),i=_(this.props.currentFeature,this.props.years,this.countyGeojson),o=j(_(this.props.currentFeature,this.props.years,this.stateGeojson),this.STATE_COLORS),c=j(i,this.COUNTY_COLORS);v.o("#"+this.STATE_MAP_ID).remove(),v.o("#"+this.COUNTY_MAP_ID).remove();var l=v.n(this.canvasRef.current).select("#map");this.drawStates(l,o,s),this.drawCounties(l,c,s),this.drawStateLegend(o),this.drawCountyLegend(c),this.state.showState?w("#"+this.COUNTY_MAP_ID):M(v.n("#legend").select("#"+this.STATE_MAP_ID));this.zoom=v.p().scaleExtent([1,4]).on("zoom",function(e){var a=e.transform;v.n("#map").selectAll("g").attr("transform",a),v.n("#map").selectAll("g").attr("stroke-width",1/a.k),t.setState({x:a.x,y:a.y,zoomScale:a.k},t.updateZoomedView(t.state.zoomScale))}),l.call(this.zoom).transition().call(this.zoom.transform,v.q.translate(this.state.x,this.state.y).scale(this.state.zoomScale))}},{key:"drawStateLegend",value:function(t){var e=x.a.legendColor().shapeWidth(30).orient("vertical").scale(t);v.n("#legend").append("g").attr("id",this.STATE_MAP_ID).call(e)}},{key:"drawCountyLegend",value:function(t){var e=x.a.legendColor().shapeWidth(30).orient("vertical").scale(t);v.n("#legend").append("g").attr("id",this.COUNTY_MAP_ID).call(e)}},{key:"drawStates",value:function(t,e,a){var r=this;t.append("g").attr("id",this.STATE_MAP_ID).selectAll("path").data(this.stateGeojson).enter().append("path").attr("d",a).attr("fill",function(t){return e(t.properties[r.state.property])}).style("stroke","#000").on("click",function(t,e){r.props.onSelectRegion(e.properties.STATE_NAME,""),r.setState({region:e.properties.STATE_NAME})}).on("mouseover",function(t,e){r.tooltip.style("visibility","visible"),r.tooltip.html(r.getTooltipText(e.properties.STATE_NAME,r.props.currentFeature,e.properties[r.state.property],r.props.currentYear)).style("left",t.pageX+10+"px").style("top",t.pageY+10+"px")}).on("mouseout",function(t,e){r.tooltip.style("visibility","hidden")})}},{key:"drawCounties",value:function(t,e,a){var r=this;t.append("g").attr("id",this.COUNTY_MAP_ID).selectAll("path").data(this.countyGeojson).enter().append("path").attr("d",a).attr("fill",function(t){return e(t.properties[r.state.property])}).style("stroke","#000").on("click",function(t,e){r.props.onSelectRegion(e.properties.STATE_NAME,e.properties.NAME),r.setState({region:e.properties.NAME+", "+e.properties.STATE_NAME})}).on("mouseover",function(t,e){r.tooltip.style("visibility","visible"),r.tooltip.html(r.getTooltipText(e.properties.NAME+", "+e.properties.STATE_NAME,r.props.currentFeature,e.properties[r.state.property],r.props.currentYear)).style("left",t.pageX+10+"px").style("top",t.pageY+10+"px")}).on("mouseout",function(t,e){r.tooltip.style("visibility","hidden")})}},{key:"updateZoomedView",value:function(t){var e=this;t>this.ZOOM_SCALE_THRESHOLD&&!0===this.state.showState?this.setState({showState:!1},function(){var t;t="#"+e.COUNTY_MAP_ID,v.o(t).style("visibility","visible"),M(v.n("#legend").select("#"+e.STATE_MAP_ID))}):t<=this.ZOOM_SCALE_THRESHOLD&&!1===this.state.showState&&this.setState({showState:!0},function(){w("#"+e.COUNTY_MAP_ID),v.n("#legend").select("#"+e.STATE_MAP_ID).style("visibility","visible")})}},{key:"getTooltipText",value:function(t,e,a,r){var n=a.toFixed(2);return"<div>\n      <p><b>".concat(t,"<b></p>\n      <p><b>").concat(this.featureList[e],": </b>").concat(n,"<p>\n      <p><b>Year: </b>19").concat(r,"</p>\n    </div>")}},{key:"componentDidMount",value:function(){var t=this;this.props.featureList.forEach(function(e){t.featureList[e.key]=e.feature}),Promise.all([v.g(this.props.stateGeojson),v.g(this.props.countyGeojson)]).then(function(e){t.stateGeojson=e[0].features,t.countyGeojson=e[1].features,t.drawMap()}).catch(function(t){return console.log("error",t)})}},{key:"componentDidUpdate",value:function(t,e){var a=this.props.currentFeature+this.props.currentYear;e.property!==a&&(this.setState({property:a}),this.drawMap())}},{key:"render",value:function(){var t=""===this.state.region?"None":this.state.region;return n.a.createElement("div",{style:{height:"100%"}},n.a.createElement(d.a,{gutter:[20,16],style:{height:"100%"}},n.a.createElement(m.a,{span:5},n.a.createElement(R.a,{options:["CHOROPLETH","HEXBIN"],value:this.state.map,onChange:this.toggleMapType}),n.a.createElement("div",null,n.a.createElement("svg",{id:"legend"},n.a.createElement("g",null))),n.a.createElement("div",null,n.a.createElement(D.a,{onClick:this.increaseZoomScale},"+"),n.a.createElement(D.a,{onClick:this.decreaseZoomScale},"-")),n.a.createElement("div",null,"Selected region: ",t),n.a.createElement(D.a,{onClick:this.resetSelectedRegion},"Reset selected region")),n.a.createElement(m.a,{span:19},n.a.createElement("div",{style:{height:"100%",width:"100%"},ref:this.canvasRef},n.a.createElement("svg",{id:"map",style:{width:"100%",height:"95%"}},n.a.createElement("g",{id:"root"}))))))}}]),e}(n.a.Component),N=a(142),P=a.n(N),F=a(143),Y=a.n(F);var H=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).canvasRef=n.a.createRef(),a.title="",a}return Object(p.a)(e,t),Object(c.a)(e,[{key:"drawParallelCoordinates",value:function(t){var e=this,a=this.canvasRef.current,r=50,n=50,s=a.scrollWidth-n-50,i=a.scrollHeight-r-50;""!==this.props.currentState&&(t=t.filter(function(t){return t.STATE_NAME===e.props.currentState}));var o=v.n(this.canvasRef.current).select("svg").attr("width",s).attr("height",i).select("g#root");o.append("g").attr("transform","translate(".concat(n,", ").concat(r,")"));var c=this.props.featureList.map(function(t){return t.key+e.props.currentYear}),l=function(t,e,a,r){var n={};return e.forEach(function(e){n[e]=v.j().domain(v.d(t,function(t){return Number(t[e])})).range([a,r])}),n}(t,c,r+i,r),u=v.k().range([n,s]).domain(c);o.selectAll("path").data(t).join("path").attr("d",function(t){return v.h()(c.map(function(e){var a=l[e];return[u(e),a(Number(t[e]))]}))}).style("fill","none").style("stroke","#69b3a2"),o.selectAll("myAxis").data(c).enter().append("g").attr("id","axis-test").attr("transform",function(t){return"translate(".concat(u(t),")")}).each(function(t){v.n(this).call(v.b().ticks(5).scale(l[t]))}).append("text").style("text-anchor","middle").attr("y",10).text(function(t){return t}).style("fill","black").attr("id","label-test")}},{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(t,e){t.currentState,this.props.currentState}},{key:"clearChart",value:function(){v.n(this.canvasRef.current).select("g#root").selectAll("*").remove()}},{key:"render",value:function(){this.props.stateCSV.length>0&&this.props.countyCSV.length>0&&(""===this.props.currentState?(this.clearChart(),this.drawParallelCoordinates(this.props.stateCSV)):(this.clearChart(),this.drawParallelCoordinates(this.props.countyCSV)));var t=""===this.props.currentState?"US states socio-economic characteristics in 19"+this.props.currentYear:this.props.currentState+" socio-economic characteristics in 19"+this.props.currentYear;return n.a.createElement("div",{style:{height:"100%"}},n.a.createElement("div",{style:{padding:"10px 10px",textAlign:"center"}},t),n.a.createElement("div",{style:{height:"100%"},ref:this.canvasRef},n.a.createElement("svg",{style:{width:"100%",height:"100%"}},n.a.createElement("g",{id:"root"}))))}}]),e}(n.a.Component);var I=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).canvasRef=n.a.createRef(),a.featureList={},a}return Object(p.a)(e,t),Object(c.a)(e,[{key:"drawScatterPlot",value:function(t){var e=this,a=this.canvasRef.current,r=a.scrollWidth,n=a.scrollHeight,s=30,i=70,o=r-i-30,c=n-s-30,l=v.n(this.canvasRef.current).select("svg").attr("width",r).attr("height",n).select("g#root").attr("transform","translate(".concat(i,", ").concat(s,")"));""!==this.props.currentState&&(t=t.filter(function(t){return t.STATE_NAME===e.props.currentState}));var u=function(t,e,a,r){var n="HR"+e;return v.j().domain(v.d(t.map(function(t){return Number(t[n])}))).range([a,r])}(t,this.props.currentYear,0,o),p=function(t,e,a,r,n){var s=e+a;return v.j().domain(v.d(t.map(function(t){return Number(t[s])}))).range([r,n])}(t,this.props.currentFeature,this.props.currentYear,c,0);l.append("g").attr("transform","translate(0, ".concat(c," )")).call(v.a(u)),l.append("g").call(v.b(p));var h="HR"+this.props.currentYear,f=this.props.currentFeature+this.props.currentYear;l.append("g").selectAll("dot").data(t).join("circle").attr("cx",function(t){return u(Number(t[h]))}).attr("cy",function(t){return p(Number(t[f]))}).attr("r",3).style("fill","#69b3a2"),l.append("text").attr("x",o/2).attr("y",c+30).attr("text-anchor","middle").text("Homicide rate"),l.append("text").attr("transform","rotate(-90)").attr("x",-c/2).attr("y",-35).attr("text-anchor","middle").text(this.featureList[this.props.currentFeature])}},{key:"clearChart",value:function(){v.n(this.canvasRef.current).select("#root").selectAll("*").remove()}},{key:"componentDidMount",value:function(){var t=this;this.props.featureList.forEach(function(e){t.featureList[e.key]=e.feature})}},{key:"render",value:function(){this.props.stateCSV.length>0&&this.props.countyCSV.length>0&&(""===this.props.currentState?(this.clearChart(),this.drawScatterPlot(this.props.stateCSV)):(this.clearChart(),this.drawScatterPlot(this.props.countyCSV)));var t=""===this.props.currentState?"Correlation between "+this.featureList[this.props.currentFeature]+" and homicide rate in US states in 19"+this.props.currentYear:"Correlation between "+this.featureList[this.props.currentFeature]+" and homicide rate in the state "+this.props.currentState+" in 19"+this.props.currentYear;return n.a.createElement("div",{style:{height:"100%"}},n.a.createElement(d.a,{style:{height:"100%"}},n.a.createElement(m.a,{span:20},n.a.createElement("div",{style:{textAlign:"center"}},t),n.a.createElement("div",{style:{height:"90%"},ref:this.canvasRef},n.a.createElement("svg",{style:{height:"100%",width:"100%"}},n.a.createElement("g",{id:"root"})))),n.a.createElement(m.a,{span:4},n.a.createElement("div",null,"[Correlation]"),n.a.createElement("div",null,"[Explanation]"))))}}]),e}(n.a.Component);var U=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).canvasRef=n.a.createRef(),a.yearRange=[],a.stateGeojson=[],a.countyGeojson=[],a.STATE_MAP_ID="h-state",a.COUNTY_MAP_ID="h-county",a.STATE_COLORS=7,a.COUNTY_COLORS=7,a.featureList={},a.features=a.props.featureList,a}return Object(p.a)(e,t),Object(c.a)(e,[{key:"drawHeatMap",value:function(t){var e=this,a=this.canvasRef.current,r=a.scrollWidth,n=a.scrollHeight,s=30,i=200,o=r-i-30,c=n-s-100;""!==this.props.currentState&&(t=t.filter(function(t){return t.STATE_NAME===e.props.currentState}));var l=[];this.props.featureList.forEach(function(a){e.props.years.forEach(function(e){var r=function(t,e,a){var r=e+a,n=0;return t.forEach(function(t){return n+=Number(t[r])}),n/t.length}(t,a.key,e);l.push({feature:a.feature,year:"19"+e,value:r})})});var u=v.i().range([0,o]).domain(this.props.years.map(function(t){return"19"+t})),p=v.i().range([0,c]).domain(this.props.featureList.map(function(t){return t.feature})),h=v.n(this.canvasRef.current).select("svg").attr("width",r).attr("height",n).select("g#root").attr("transform","translate(".concat(i,", ").concat(s,")"));h.append("g").call(v.a(u).ticks(4)).attr("transform","translate(0, ".concat(c,")"));var f=h.append("g").call(v.b(p)),d={};l.forEach(function(t){d.hasOwnProperty(t.feature)?d[t.feature].push(t.value):d[t.feature]=[t.value]});var m={};for(var y in d)m[y]=v.j().range(["#eff3ff","#08519c"]).domain(v.d(d[y]));h.selectAll().data(l).enter().append("rect").attr("x",function(t){return u(t.year)}).attr("y",function(t){return p(t.feature)}).attr("width",u.bandwidth()).attr("height",p.bandwidth()).style("fill",function(t){return m[t.feature](t.value)}),f.selectAll("g").selectAll("text").attr("font-weight",function(t){return"Homicide rate"===t?700:400}).attr("font-size",function(t){return"Homicide rate"===t?"20px":"10px"})}},{key:"clearMap",value:function(){v.n(this.canvasRef.current).select("#root").selectAll("*").remove()}},{key:"componentDidMount",value:function(){var t=this;this.props.featureList.forEach(function(e){t.featureList[e.key]=e.feature})}},{key:"render",value:function(){this.props.countyCSV.length>0&&(this.clearMap(),this.drawHeatMap(this.props.countyCSV));var t=""===this.props.currentState?"Socio-economic characteristics in the US":"Socio-economic characteristics in "+this.props.currentState;return n.a.createElement("div",{style:{height:"100%"},ref:this.canvasRef},n.a.createElement("div",{style:{textAlign:"center"}},t),n.a.createElement("svg",{style:{width:"100%",height:"100%"}},n.a.createElement("g",{id:"root"})))}}]),e}(n.a.Component),V=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).selectTime=function(t){a.setState({year:t})},a.state={countyDataset:[],stateDataset:[],feature:"HR",year:60,state:"",county:""},a.features=[{key:"HR",feature:"Homicide rate"},{key:"UE",feature:"Unemployment rate"},{key:"DV",feature:"Divorce rate"},{key:"MA",feature:"Median age"},{key:"DNL",feature:"Population density"},{key:"MFIL",feature:"Median family income"},{key:"FP",feature:"Percentage of families below poverty"},{key:"BLK",feature:"Percentage of black population"},{key:"GI",feature:"Gini index"},{key:"FH",feature:"Percentage of female headed households"}],a.years=[60,70,80,90],a.selectFeature=a.selectFeature.bind(Object(h.a)(Object(h.a)(a))),a.selectRegion=a.selectRegion.bind(Object(h.a)(Object(h.a)(a))),a}return Object(p.a)(e,t),Object(c.a)(e,[{key:"selectFeature",value:function(t){t.preventDefault(),this.setState({feature:t.currentTarget.accessKey})}},{key:"selectRegion",value:function(t,e){this.setState({state:t,county:e})}},{key:"componentDidMount",value:function(){}},{key:"fetchData",value:function(){var t=this;Promise.all([v.c(E.a),v.c(b.a)]).then(function(e){t.setState({countyDataset:e[0],stateDataset:e[1]})})}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){0!==this.state.countyDataset.length&&0!==this.state.stateDataset.length||this.fetchData();return n.a.createElement("div",{className:"App"},n.a.createElement(f.a,{className:"layout"},n.a.createElement(d.a,{gutter:[6,6]},n.a.createElement(m.a,{span:24},n.a.createElement(d.a,{gutter:6},n.a.createElement(m.a,{span:4},n.a.createElement(y.a,{style:{height:700}},n.a.createElement(k,{featureList:this.features,currentFeature:this.state.feature,onSelectFeature:this.selectFeature}))),n.a.createElement(m.a,{span:14},n.a.createElement(y.a,{style:{height:700}},n.a.createElement(C,{timeline:this.years,onSelectTime:this.selectTime}),n.a.createElement(L,{stateGeojson:Y.a,stateDataset:this.state.stateDataset,countyGeojson:P.a,currentFeature:this.state.feature,currentYear:this.state.year,years:this.years,onSelectRegion:this.selectRegion,featureList:this.features}))),n.a.createElement(m.a,{span:6},n.a.createElement(y.a,{style:{height:700}},n.a.createElement(U,{featureList:this.features,years:this.years,countyCSV:this.state.countyDataset,currentState:this.state.state}))))),n.a.createElement(m.a,{span:24},n.a.createElement(d.a,{gutter:6},n.a.createElement(m.a,{span:14},n.a.createElement(y.a,{style:{height:338}},n.a.createElement(H,{featureList:this.features,stateCSV:this.state.stateDataset,currentYear:this.state.year,countyCSV:this.state.countyDataset,currentState:this.state.state}))),n.a.createElement(m.a,{span:10},n.a.createElement(y.a,{style:{height:338}},n.a.createElement(I,{featureList:this.features,stateCSV:this.state.stateDataset,countyCSV:this.state.countyDataset,currentState:this.state.state,currentFeature:this.state.feature,currentYear:this.state.year}))))))))}}]),e}(n.a.Component),G=function(t){t&&t instanceof Function&&a.e(1).then(a.bind(null,616)).then(function(e){var a=e.getCLS,r=e.getFID,n=e.getFCP,s=e.getLCP,i=e.getTTFB;a(t),r(t),n(t),s(t),i(t)})};i.a.createRoot(document.getElementById("root")).render(n.a.createElement(V,null)),G()}},[[144,3,2]]]);
//# sourceMappingURL=main.b5062e1b.chunk.js.map